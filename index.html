<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game Radar</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
    <script>
        let source;
        function startVisualization() {
            const token = document.getElementById('token').value;
            source = new EventSource(`http://57.128.180.87:3030/data/${token}`);
            source.onmessage = function(event) {
                let data = JSON.parse(event.data);
                updateRadar(data);
            };
        }

        function updateRadar(data) {
            let canvas = document.getElementById('radar');
            let context = canvas.getContext('2d');
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Draw players
            data.players.forEach(player => {
                context.fillStyle = player.team_id === 1 ? 'blue' : 'red';
                context.beginPath();
                context.arc(player.pos[0], player.pos[1], 5, 0, 2 * Math.PI);
                context.fill();
            });

            // Draw skills
            data.skills.forEach(skill => {
                context.fillStyle = skill.team_id === 1 ? 'green' : 'purple';
                context.beginPath();
                context.arc(skill.pos[0], skill.pos[1], 3, 0, 2 * Math.PI);
                context.fill();
            });
        }
    </script>
</head>
<body>
    <input type="text" id="token" placeholder="Enter Token">
    <button onclick="startVisualization()">Start Visualization</button>
    <canvas id="radar" width="500" height="500"></canvas>
</body>
</html>
